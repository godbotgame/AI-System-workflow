# Stage 2: 阶段规划

**输入**：模块划分文档、模块依赖关系  
**输出**：3-6 个开发阶段的规划，每个阶段包含目标模块和验收标准  

---

## 执行步骤

### Step 1: 分析模块依赖

列出所有模块，标注依赖关系：

```
模块列表：
- [模块A]：无依赖
- [模块B]：依赖 A
- [模块C]：依赖 A, B
- [模块D]：无依赖（独立模块）
- [模块E]：依赖 C, D
```

依赖图（拓扑排序）：
```
A ──> B ──> C ──> E
              ↑
D ────────────┘
```

### Step 2: 制定开发阶段

根据依赖关系，将模块分组为 3-6 个开发阶段：

**原则**：
- 被依赖的模块先开发
- 同一阶段内的模块尽量独立（可并行）
- 每个阶段要有可运行的成果（MVP 思维）
- 每个阶段建议 1-2 周完成

**阶段规划模板**：

```markdown
## 开发阶段规划

### 阶段 1：基础设施（第1-2周）
**目标模块**：
- 模块A：[简要描述]
- 模块D：[简要描述]

**本阶段产出**：
- [ ] 用户可以注册/登录
- [ ] 基础数据库已建立

**验收标准**：
- API: /auth/login 可正常返回 token
- 数据库：users 表已创建

---

### 阶段 2：核心功能（第3-4周）
**目标模块**：
- 模块B：[依赖阶段1的模块A]

**本阶段产出**：
- [ ] [具体可见的成果]

**验收标准**：
- [可测试的验收条件]

---

### 阶段 3：[名称]（第N周）
[...]

---

### 阶段 N：上线准备（最后1周）
**目标**：
- [ ] 性能优化
- [ ] 安全检查
- [ ] 部署脚本
- [ ] 监控告警
```

### Step 3: 生成阶段索引

更新 `process.md` 中的阶段列表：

```markdown
## 开发阶段索引

| 阶段 | 名称 | 模块 | 状态 | 计划周期 |
|------|------|------|------|----------|
| 1 | 基础设施 | A, D | pending | 第1-2周 |
| 2 | 核心功能 | B | pending | 第3-4周 |
| 3 | 业务逻辑 | C | pending | 第5-6周 |
| 4 | 集成联调 | E | pending | 第7周 |
| 5 | 上线准备 | - | pending | 第8周 |
```

---

## 验收标准

- [ ] 所有模块已分配到对应阶段
- [ ] 每个阶段有明确的交付物
- [ ] 阶段顺序符合依赖关系（无法提前实现的模块没有被提前）
- [ ] 每个阶段的验收标准具体可测试
- [ ] `process.md` 已更新阶段规划

---

## 输出到 Stage 3

进入 **阶段循环**：从阶段 1 开始，依次执行 Stage 3 → Stage 4 → Stage 5，通过验收后进入下一开发阶段。
